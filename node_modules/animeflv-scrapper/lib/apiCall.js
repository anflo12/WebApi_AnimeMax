"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var cloudscraper=require("cloudscraper");var apiCall=function apiCall(method){return function(url,config){var baseURL=config.baseURL,_config$transformResp=config.transformResponse,transformResponse=_config$transformResp===void 0?JSON.parse:_config$transformResp,_config$params=config.params,params=_config$params===void 0?{}:_config$params;var formatedParams=Object.keys(params).reduce(function(acc,key){var param="".concat(key,"=").concat(params[key]);return[].concat((0,_toConsumableArray2["default"])(acc),[param])},[]);var finalURL="".concat(baseURL).concat(url,"?").concat(formatedParams.join("&"));return new Promise(function(resolve,reject){cloudscraper[method](finalURL,function(err,response,body){if(err)return reject({err:err});if(body)return resolve({data:transformResponse(body)})})})}};module.exports={get:apiCall("get"),post:apiCall("post")};