"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}var apiCall=require("./apiCall");var _require=require("./selectors"),parseHTML=_require.parseHTML,extractAnimeList=_require.extractAnimeList,extractAnimeDetails=_require.extractAnimeDetails,extractVideoSources=_require.extractVideoSources;var baseURL="https://animeflv.net";var getAllAnimes=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(){var _ref2,data,formatedAnimes;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return apiCall.get("/api/animes/list",{baseURL:baseURL});case 2:_ref2=_context.sent;data=_ref2.data;formatedAnimes=data.map(function(item){return{index:item[0],label:item[1],title:item[2],id:item[3],type:item[4]}});return _context.abrupt("return",formatedAnimes);case 6:case"end":return _context.stop();}}},_callee)}));return function getAllAnimes(){return _ref.apply(this,arguments)}}();var searchAnime=/*#__PURE__*/function(){var _ref3=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2(query,params){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",getAnimes(_objectSpread({q:query},params)));case 1:case"end":return _context2.stop();}}},_callee2)}));return function searchAnime(_x,_x2){return _ref3.apply(this,arguments)}}();var getAnimes=/*#__PURE__*/function(){var _ref4=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee3(params){var _ref5,data;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return apiCall.get("/browse",{baseURL:baseURL,transformResponse:parseHTML,params:params});case 2:_ref5=_context3.sent;data=_ref5.data;return _context3.abrupt("return",extractAnimeList(data));case 5:case"end":return _context3.stop();}}},_callee3)}));return function getAnimes(_x3){return _ref4.apply(this,arguments)}}();var getAnimeInfo=/*#__PURE__*/function(){var _ref6=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee4(animeTitle,animeId){var _ref7,data;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return apiCall.get("/anime/".concat(animeId,"/").concat(animeTitle),{baseURL:baseURL,transformResponse:parseHTML});case 2:_ref7=_context4.sent;data=_ref7.data;return _context4.abrupt("return",extractAnimeDetails(data));case 5:case"end":return _context4.stop();}}},_callee4)}));return function getAnimeInfo(_x4,_x5){return _ref6.apply(this,arguments)}}();var getEpisodeVideos=/*#__PURE__*/function(){var _ref8=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee5(episodeIndex,animeTitle,episodeId){var _ref9,data;return _regenerator["default"].wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return apiCall.get("/ver/".concat(episodeId,"/").concat(animeTitle,"-").concat(episodeIndex),{baseURL:baseURL,transformResponse:parseHTML});case 2:_ref9=_context5.sent;data=_ref9.data;return _context5.abrupt("return",extractVideoSources(data));case 5:case"end":return _context5.stop();}}},_callee5)}));return function getEpisodeVideos(_x6,_x7,_x8){return _ref8.apply(this,arguments)}}();module.exports={getAllAnimes:getAllAnimes,searchAnime:searchAnime,getAnimes:getAnimes,getAnimeInfo:getAnimeInfo,getEpisodeVideos:getEpisodeVideos};